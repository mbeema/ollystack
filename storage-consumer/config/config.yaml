# OllyStack Storage Consumer Configuration
#
# Consumes telemetry from Kafka and batch writes to ClickHouse

server:
  metrics_port: 8889

kafka:
  brokers:
    - kafka:9092
  group_id: ollystack-storage-consumer
  metrics_topic: ollystack-metrics
  logs_topic: ollystack-logs
  traces_topic: ollystack-traces
  auto_offset_reset: earliest  # Start from beginning if no committed offset
  session_timeout_ms: 30000
  heartbeat_interval_ms: 10000
  max_poll_records: 500

clickhouse:
  host: clickhouse
  port: 9000
  database: ollystack
  username: default
  password: ${CLICKHOUSE_PASSWORD:-changeme}
  max_open_conns: 10
  max_idle_conns: 5
  dial_timeout: 10    # seconds
  read_timeout: 60    # seconds
  write_timeout: 60   # seconds
  compression: lz4

batcher:
  max_size: 10000        # Max messages per batch
  max_bytes: 10485760    # 10MB max bytes per batch
  flush_interval_ms: 1000 # Flush every 1 second max
